---
// Definir el tipo Command localmente para compatibilidad con datos de Notion
interface Command {
  id: string;
  title: string;
  command: string;
  description: string;
  category: string;
  tags: string[];
  examples?: string[];
  dangerous?: boolean;
  platform?: string;
  syntax?: string;
  parameters?: Array<{
    param: string;
    description: string;
    example: string;
  }>;
  output?: string;
  notes?: string;
  references?: string[];
  created_at: string;
  updated_at: string;
}
import Card from '../ui/Card.astro';
import Badge from '../ui/Badge.astro';

interface Props {
  command: Command;
  isSelected?: boolean;
  onClick?: string;
}

const { command, isSelected = false, onClick } = Astro.props;

type ColorMap = {
  [key: string]: string;
};

const colorMap: ColorMap = {
  blue: 'text-blue-700 dark:text-blue-400',
  green: 'text-green-700 dark:text-green-400',
  orange: 'text-orange-700 dark:text-orange-400',
  purple: 'text-purple-700 dark:text-purple-400',
  indigo: 'text-indigo-700 dark:text-indigo-400',
  red: 'text-red-700 dark:text-red-400',
  teal: 'text-teal-700 dark:text-teal-400',
  cyan: 'text-cyan-700 dark:text-cyan-400',
  gray: 'text-gray-700 dark:text-gray-400'
};

// Función para asignar colores a categorías
function getCategoryColor(category: string): string {
  const colorMap: { [key: string]: string } = {
    'dns': 'blue',
    'linux': 'green',
    'security': 'red',
    'network': 'indigo',
    'database': 'purple',
    'web': 'orange',
    'git': 'teal',
    'docker': 'cyan'
  };
  
  return colorMap[category.toLowerCase()] || 'gray';
}

// Obtener el color de la categoría para este comando
const categoryColor = getCategoryColor(command.category);
---

<div class="command-card cursor-pointer transition-transform hover:scale-[1.02] active:scale-[0.98]" onclick={onClick}>
  <Card className={`p-4 sm:p-6 ${isSelected ? 'ring-2 ring-blue-500' : ''} hover:shadow-lg transition-shadow`}>
    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start mb-3 sm:mb-2">
      <div class="flex items-start mb-2 sm:mb-0">
        <h3 class={`text-lg sm:text-xl font-mono font-semibold ${colorMap[categoryColor]} break-words`}>
          {command.title}
        </h3>
        {command.dangerous && 
          <span class="bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 text-xs font-bold px-2 py-1 rounded-full ml-2 flex-shrink-0">⚠️</span>
        }
      </div>
      <span class="font-mono text-xs sm:text-sm text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 px-2 py-1 rounded break-all">{command.syntax || command.command}</span>
    </div>
    <p class="text-gray-700 dark:text-gray-300 mb-4 text-sm sm:text-base leading-relaxed">{command.description}</p>
    <div class="flex flex-wrap gap-2">
      {command.tags.map(tag => (
        <Badge color="gray" size="sm">{tag}</Badge>
      ))}
    </div>
  </Card>
</div>
